<head>
  <title>ShiftMap</title>
</head>


<template name="calendar">
  <div class="well" style="z-index:initial;position:absolute">
    <h2 id="title"> <center> Calendar of Shifts </center> </h2> 
    {{>updateGroup}}
    <table border="1" style="position:relative" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>  </th>
          <th class="dayOfWeek"><center> Sunday </center></th>
          <th class="dayOfWeek"><center> Monday </center></th>
          <th class="dayOfWeek"><center> Tuesday </center></th>
          <th class="dayOfWeek"><center> Wednesday </center></th>
          <th class="dayOfWeek"><center> Thursday </center></th> 
          <th class="dayOfWeek"><center> Friday </center></th> 
          <th class="dayOfWeek"><center> Saturday </center></th> 
        </tr>
      </thead>

        <tbody>
                <tr>
                  <th></th>
                  {{#each getDays 0}}
                    <th><center>{{dayOfWeek}}</center></th>
                  {{/each}}
                </tr>
        </tbody>

        <tbody>
          <tr><th class="timeOfDay"><center> 8am </center></th> 
          {{#each getDays "8am"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 9am </center></th> 
          {{#each getDays "9am"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 10am </center></th> 
          {{#each getDays "10am"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 11am </center></th> 
          {{#each getDays "11am"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 12pm </center></th> 
          {{#each getDays "12pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 1pm </center></th> 
          {{#each getDays "1pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 2pm </center></th> 
          {{#each getDays "2pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 3pm </center></th> 
          {{#each getDays "3pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 4pm </center></th> 
          {{#each getDays "4pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 5pm </center></th> 
          {{#each getDays "5pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 6pm </center></th> 
          {{#each getDays "6pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 7pm </center></th> 
          {{#each getDays "7pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 8pm </center></th> 
          {{#each getDays "8pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 9pm </center></th> 
          {{#each getDays "9pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 10pm </center></th> 
          {{#each getDays "10pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>
          <tr><th class="timeOfDay"><center> 11pm </center></th> 
          {{#each getDays "11pm"}}
            <td> {{> setDay}} </td>
          {{/each}}
          </tr>

          
        </tbody>
    </table>
  </div>

</template>

<template name = "Home">
  <div class = "container">
  {{#if currentUser}}
      {{> calendar}}
  {{else}}
      <h2 id = "header1"><span>ShiftMap:<span class='spacer'></span><br /><span class='spacer'></span>The time for those annoying emails to request a shift has ended</span></h2>
      <!--<h2 id="header2"><a href="/calendar" >login</a></h2>-->
      <center><a href="#" class="caslogin"><button type="button" class="btn btn-primary btn-lg"> Login </button></a></center>
  {{/if}}
  </div>
</template>


<template name="Header">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">

      <div class="navbar-header">
        <a class="navbar-brand" href="/">ShiftMap</a>
      </div>

      <ul class="collapse navbar-collapse" id="main-nav">

        <ul class="nav navbar-nav navbar-right">
          <li><a href="/help"> Help </a></li>
          <li><a href="/about-us"> About Us </a></li>
          
          {{#if currentUser}}
            <li><a href="/employer-form"><button type="button" class="btn btn-default" aria-label="plus">
              <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            </button></a></li>
            {{#each getGroups currentUser.profile.name}}
              <li><a class="groupElement" href="/" id={{ groupid }}>{{getGroupName groupid}}</a></li>
            {{/each}}
          {{/if}} 
          {{> CasLogin }}
        </ul>
      </ul>
    </div>
  </nav>
</template>

<template name="Layout">
  {{> Header}}
  <div class="container">
    {{> yield}}
  </div>
</template>

<template name="CasLogin">
  {{#if currentUser}}

    <li class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">{{ currentUser.profile.name }}<b class="caret"></b></a>
      <ul class="dropdown-menu" role="menu">
        <li><a href="#" class="btn cas-logout">Logout</a></li>
      </ul>
    </li>

  {{else}}
    <li><a href="#" class="navbar-link cas-login">Login</a></li>
  {{/if}}
</template>

<!-- Retrieve the group and its start, end, and admin --> 
<template name="setDay">
  {{#each oneday}}
    <button type="button" style="position:absolute;z-index:1;{{mapShift start end users day _id}}" id={{_id}}
        data-toggle="popover" data-html = "true" data-container = "body" data-placement = "auto-right">
     {{start}} - {{end}}
    </button>
    {{rendered _id}}
  {{/each}}

  <div id = "popover-head" class = "hide">
    <b>Pick Your Action</b>
  </div>
  <div id = "popover-content1" class = "hide">
    <!-- for all these buttons we should add the respective button id's... Talk with danny and alex on how to implement this -->
    Enroll in shift: <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></button><br>
    Drop shift : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></button><br>
    Request swap : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-random" aria-hidden="true"></span></button><br>
    Request sub : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-resize-vertical" aria-hidden="true"></span></button>
  </div>
  <!-- when it's full/you're in it you shouldn't be able to add it -->
  <div id = "popover-content2" class = "hide">
    Drop shift : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></button><br>
    Request swap : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-random" aria-hidden="true"></span></button><br>
    Request sub : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-resize-vertical" aria-hidden="true"></span></button>
  </div>

  <!-- when you're not in it, you shouldn't be able to drop it -->
  <div id = "popover-content3" class = "hide">
    Enroll in shift: <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></button><br>
    Request swap : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-random" aria-hidden="true"></span></button><br>
    Request sub : <button type="button" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-resize-vertical" aria-hidden="true"></span></button>
  </div>  
</template>

